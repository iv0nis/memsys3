# Context Template
# Este es el archivo que carga DevAI para entender el proyecto
# Es compilado por el Context Agent (CA) desde memory/full/
# Límite ÚNICO: máximo 2000 líneas total

metadata:
  compilat_per: "Context Agent"
  ultima_compilacio: "[TIMESTAMP]"
  versio_context: "[NUMERO_VERSIO]"

# ============================================
# PROJECT INFO
# ============================================
project:
  nom: "[NOM_PROJECTE]"
  descripcio: "[DESCRIPCIÓ_1_LÍNIA]"
  fase: "[FASE_ACTUAL]"
  ultima_feature: "[ÚLTIMA_FEATURE]"
  seguent_milestone: "[PRÒXIM_MILESTONE]"

# ============================================
# FEATURES OPERATIVES
# ============================================
features:
  feature_1:
    nom: "[NOM]"
    url: "[URL]"
    estat: "[operatiu|desenvolupament|pendent]"
    descripcio: "[DESCRIPCIÓ_BREU]"

  # CA añade tantas features como sea necesario

# ============================================
# STACK TECNOLÒGIC
# ============================================
stack:
  frontend: "[FRAMEWORK + VERSIÓ]"
  backend: "[RUNTIME + FRAMEWORK]"
  database: "[DATABASE si n'hi ha]"
  deploy: "[PLATFORM]"
  # Solo lo esencial del stack

# ============================================
# URLS PRINCIPALS
# ============================================
urls:
  production: "[URL_PRINCIPAL]"
  staging: "[URL_STAGING si n'hi ha]"
  # CA añade URLs relevantes

# ============================================
# ADRs RELEVANTES
# CA selecciona con criterio inteligente según impacto global
# NO hay límite fijo, solo criterio y 2000 líneas totales
# ============================================
adrs:
  - id: "001"
    titol: "[TÍTOL_ADR]"
    decisio: "[QUÈ ES VA DECIDIR]"
    motiu: "[PER QUÈ]"
    impacte: "[IMPACTE_GLOBAL]"

  # CA añade más ADRs según relevancia
  # Decisiones con impacto global, no obvias, arquitectónicas

# ============================================
# ÚLTIMA SESIÓN (o sesiones recientes)
# CA sintetiza sesiones más impactantes
# ============================================
ultima_sessio:
  data: "[YYYY-MM-DD]"
  durada: "[~Xh]"
  que_es_va_fer:
    - "[FEATURE_PRINCIPAL_IMPLEMENTADA]"
    - "[PROBLEMA_SIGNIFICATIU_RESOLT]"
    - "[REFACTORING_IMPORTANT]"
  decisions:
    - "[DECISIÓ_TÈCNICA_PRESA]"
    - "[TRADE-OFF_ACCEPTAT]"
  proxims_passos:
    - "[TASCA_PENDENT_IMPORTANT]"
    - "[BLOCKER_CONEGUT]"

# Si hay múltiples sesiones recientes relevantes, CA puede añadir más

# ============================================
# GOTCHAS CRÍTICOS
# Errores/configuraciones que rompen el proyecto si no se conocen
# CA filtra con criterio: solo imprescindibles
# ============================================
gotchas:
  - id: "[ID_DESCRIPTIU]"
    problema: "[PROBLEMA_CRÍTIC]"
    solucio: "[COM_RESOLDRE]"

  # CA añade solo gotchas activos y críticos
  # Contra-intuitivos, que rompen desarrollo, repetitivos

# ============================================
# PENDIENTES PRIORITARIOS
# Tareas más importantes del proyecto ahora
# CA prioriza según project-status y contexto reciente
# ============================================
pendents:
  - prioritat: 1
    tasca: "[TASCA_MÉS_CRÍTICA]"
    detall: "[PER_QUÈ_ÉS_IMPORTANT]"

  - prioritat: 2
    tasca: "[SEGONA_PRIORITAT]"
    detall: "[CONTEXT_ADDICIONAL]"

  # CA añade según prioridad real, no límite fijo

# ============================================
# NOTAS DE COMPILACIÓN DEL CA
# Transparencia del proceso de compilación
# ============================================
notes_compilacio:
  adrs_totals: "[N total a memory/full/adr.yaml]"
  adrs_incloses: "[M seleccionades per context]"
  sessions_totals: "[X total a memory/full/sessions.yaml]"
  sessions_incloses: "[Y sintetitzades en context]"
  tokens_inicials: "[Tokens llegits de full/]"
  tokens_finals: "[Tokens del context.yaml generat]"
  arxivament: "[Si s'ha activat Pla Contingència: sessions/ADRs arxivades a history/]"
  criteris_filtratge: "[Criteris intel·ligents usats: impacte global, rellevància actual, etc.]"
  linies_totals: "[~X línies de 2000 màxim]"

# ============================================
# NOTAS DE USO
# ============================================
# Este archivo es COMPILADO automáticamente, no editar manualmente
# Para actualizar: ejecutar @memsys3/prompts/compile-context.md
# Para más detalles: ver memory/full/adr.yaml y memory/full/sessions.yaml
# Si contexto demasiado grande: CA moverá datos a memory/history/ (no leído)
