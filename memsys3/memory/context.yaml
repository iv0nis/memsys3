# Context - memsys3
# Compilado autom√°ticamente por Context Agent
# Este es el contexto optimizado que los Development Agents leen al iniciar sesi√≥n

metadata:
  compilado_por: "Context Agent"
  ultima_compilacion: "2025-12-01"
  version_context: "1.9"

# ============================================
# README DEL PROYECTO
# ============================================
readme_proyecto: |
  # memsys3 - Sistema de Memoria para Agentes de IA

  Sistema replicable de gesti√≥n de contexto para optimizar el trabajo con AI Development Agents

  ## Problema que Resuelve

  Cuando trabajas con AI agents en proyectos grandes:
  - Los agents deben leer decenas de archivos de c√≥digo para entender el proyecto
  - Cada sesi√≥n nueva consume miles de tokens repitiendo el mismo contexto
  - Decisiones y aprendizajes se pierden entre sesiones
  - No hay visibilidad de qu√© "sabe" el agent

  ## Soluci√≥n

  memsys3 proporciona:
  - Context compilado en un √∫nico archivo (~2500-3000 tokens)
  - Sistema de documentaci√≥n estructurado (ADRs, sessions, status)
  - Context Agent que filtra autom√°ticamente la informaci√≥n relevante
  - Visualizador web para ver la "mente" de los agents
  - Prompts reutilizables (newSession, endSession, compile-context, mind, deploy, actualizar, backlog, github)
  - Sistema de rotaci√≥n autom√°tica cuando supera l√≠mites (>1800 l√≠neas)
  - Plan de contingencia con archivado inteligente (>150K tokens)
  - README opcional: Context Agent acepta proyectos sin README o puede crear autom√°ticamente
  - Consulta .gitignore durante deployment: pregunta si excluir memsys3/ de git (privacidad)

  ## Quick Start

  Desde la ra√≠z de tu proyecto, con tu AI agent ejecuta:

  ```bash
  @memsys3/prompts/deploy.md
  ```

  El workflow es:
  1. Clone temporal de memsys3 desde GitHub
  2. Copia de estructura a tu proyecto/memsys3/
  3. Briefing sobre tu proyecto (stack, objetivos, etc.)
  4. Personalizaci√≥n de archivos (project-status.yaml, newSession.md)
  5. Limpieza del clone temporal

  Resultado: Sistema memsys3 completamente funcional y personalizado.

  ## Uso con AI Agents

  Comenzar sesi√≥n: @memsys3/prompts/newSession.md
  Acabar sesi√≥n: @memsys3/prompts/endSession.md
  Recompilar contexto: @memsys3/prompts/compile-context.md
  Ver la "mente" del agent: @memsys3/prompts/mind.md

  ## Estructura

  ```
  memsys3/
  ‚îú‚îÄ‚îÄ agents/             # Main-Agent y Context-Agent
  ‚îú‚îÄ‚îÄ memory/
  ‚îÇ   ‚îú‚îÄ‚îÄ context.yaml    # Contexto compilado (este archivo)
  ‚îÇ   ‚îú‚îÄ‚îÄ project-status.yaml # Estado actual del proyecto
  ‚îÇ   ‚îú‚îÄ‚îÄ full/           # Documentaci√≥n completa
  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adr.yaml   # Architecture Decision Records
  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sessions.yaml # Hist√≥rico de sesiones
  ‚îÇ   ‚îú‚îÄ‚îÄ templates/      # Gu√≠as permanentes
  ‚îÇ   ‚îî‚îÄ‚îÄ history/        # Archivado (Plan Contingencia >150K tokens)
  ‚îú‚îÄ‚îÄ prompts/            # Prompts reutilizables
  ‚îî‚îÄ‚îÄ viz/                # Visualizador web
  ```

  ## Features Principales

  - **Context Agent con Criterio Inteligente**: Filosof√≠a "¬øQu√© debe saber CUALQUIER agent descontextualizado?". L√≠mite √∫nico: m√°x 2000 l√≠neas. NO l√≠mites arbitrarios. Lee TODO primero, despu√©s filtra con criterio.

  - **Rotaci√≥n Autom√°tica (>1800 l√≠neas)**: Detecta autom√°ticamente cuando sessions.yaml o adr.yaml superan 1800 l√≠neas. Rotaci√≥n segura: copia ‚Üí verifica ‚Üí crea nuevo.

  - **Plan de Contingencia (>150K tokens)**: Cuando contexto supera 150K tokens, CA archiva datos irrelevantes a memsys3/memory/history/ (que NO se lee ‚Üí ahorro real). Reduce a ~120K tokens. Datos preservados, no perdidos.

  - **Sistema de Templates YAML**: Templates agn√≥sticos reutilizables. Consistencia total. ~30% ahorro tokens vs Markdown.

  - **Sistema de Actualizaci√≥n**: Prompt actualizar.md para actualizaci√≥n segura de memsys3 en proyectos existentes. PASO 0: detecci√≥n inteligente de estructura antigua incompatible (3 escenarios). Backups autom√°ticos antes de tocar datos.

  - **Deployment con Privacidad**: Consulta .gitignore (PASO 8 en deploy.md): pregunta si excluir memsys3/ de git.

  ## Dog-fooding

  Este proyecto usa memsys3 para desarrollarse a s√≠ mismo.
  - memsys3_templates/ = PRODUCTO FINAL (lo que se distribuye)
  - memsys3/ = Instancia de dog-fooding (desarrollo interno, NO se distribuye)

  Repositorio: https://github.com/iv0nis/memsys3

# ============================================
# PROJECT INFO
# ============================================
project:
  nombre: "memsys3"
  descripcion: "Sistema de gesti√≥n de contexto para AI Development Agents"
  fase: "Development v1.9"
  ultima_feature: "Context Agent mejorado: An√°lisis profundo README autom√°tico (PASO 7 obligatorio, 10 categor√≠as) + Integraci√≥n backlog selectiva (lee solo items referenciados)"
  siguiente_milestone: "Testear an√°lisis README autom√°tico + Validar lectura selectiva backlog + Evaluar ADR-011 sobre an√°lisis README"

# ============================================
# FEATURES OPERATIVAS
# ============================================
features:
  context_agent:
    nombre: "Context Agent"
    estado: "operativo"
    descripcion: "Agente que compila contexto completo con criterio inteligente (m√°x 2000 l√≠neas)"

  rotacion_automatica:
    nombre: "Rotaci√≥n Autom√°tica"
    estado: "operativo"
    descripcion: "Sistema de rotaci√≥n sessions/ADRs cuando superan 1800 l√≠neas"

  plan_contingencia:
    nombre: "Plan de Contingencia"
    estado: "operativo"
    descripcion: "Archivado inteligente a history/ cuando >150K tokens"

  visualizador:
    nombre: "Memory Visualizer"
    estado: "operativo"
    descripcion: "Dashboard web para ver la 'mente' de los agentes (4 pesta√±as)"

  prompts:
    nombre: "Prompts Reutilizables"
    estado: "operativo"
    descripcion: "newSession, endSession, compile-context, mind, deploy, actualizar, actualizar_cat, backlog, github - TODOS con rutas memsys3/"

  documentacion:
    nombre: "Sistema de Documentaci√≥n Multi-nivel"
    estado: "operativo"
    descripcion: "4 niveles: README repo, README templates, DEVELOPMENT, UPDATE"

  sincronizacion_catalan:
    nombre: "Sistema Sincronizaci√≥n Versi√≥n Catalana"
    estado: "operativo"
    descripcion: "Prompt actualizar_cat.md sincroniza memsys3_templates/ espa√±ol ‚Üí catal√°n, branch catalan en GitHub"

  backlog_distribuible:
    nombre: "Sistema Backlog Distribuible"
    estado: "operativo"
    descripcion: "memsys3/backlog/ con README agn√≥stico (315 l√≠neas) + 3 ejemplos ilustrativos + prompt backlog.md (3 operaciones: consultar, crear, actualizar)"

# ============================================
# STACK TECNOL√ìGICO
# ============================================
stack:
  frontend: "HTML/CSS/JS (visualizador)"
  backend: "Python 3.x (servidor visualizador)"
  database: "Ninguno (YAML files)"
  deploy: "GitHub + clonado local"
  lenguaje_docs: "YAML + Markdown"

# ============================================
# URLS PRINCIPALES
# ============================================
urls:
  repository: "https://github.com/iv0nis/memsys3"

# ============================================
# ADRs RELEVANTES (11 totales, 8 incluidas)
# Seleccionadas con criterio inteligente seg√∫n impacto global
# ============================================
adrs:
  - id: "001"
    titulo: "Criterio inteligente del Context Agent vs l√≠mites arbitrarios"
    decision: "El Context Agent usa criterio inteligente bas√°ndose en la pregunta: '¬øQu√© debe saber CUALQUIER agent descontextualizado para trabajar aqu√≠?'. L√≠mite √öNICO: m√°ximo 2000 l√≠neas en context.yaml final. NO hay l√≠mites arbitrarios para ADRs, sessions, gotchas, etc."
    motivo: "Los sistemas anteriores usaban l√≠mites r√≠gidos (m√°x 7 ADRs, m√°x 15 l√≠neas por sesi√≥n) que no se adaptaban a la realidad del proyecto. Proyectos peque√±os perd√≠an contexto, proyectos grandes no pod√≠an expresarse adecuadamente."
    impacto: "Contexto adaptativo seg√∫n necesidades del proyecto. CA decide con visi√≥n panor√°mica completa. Proyectos peque√±os mantienen todo, proyectos grandes filtran inteligentemente. M√°s flexible y escalable."

  - id: "002"
    titulo: "Rotaci√≥n autom√°tica de sessions/ADRs (>1800 l√≠neas)"
    decision: "Cuando sessions.yaml o adr.yaml superen 1800 l√≠neas: endSession.md detecta autom√°ticamente, hace rotaci√≥n segura: copia ‚Üí verifica ‚Üí crea nuevo. sessions.yaml ‚Üí sessions_N.yaml, adr.yaml ‚Üí adr_N.yaml. Context Agent lee TODOS los archivos rotados hasta detectar >150K tokens."
    motivo: "Read tool tiene l√≠mite de 2000 l√≠neas. Si sessions.yaml o adr.yaml crecen demasiado, los agents no pueden leerlos."
    impacto: "Sistema escala infinitamente. No se pierden datos nunca. Autom√°tico, sin intervenci√≥n manual. Preserva hist√≥rico completo."

  - id: "003"
    titulo: "Plan de Contingencia con archivado inteligente (>150K tokens)"
    decision: "Cuando total de full/ supera 150K tokens: CA identifica ADRs/sessions irrelevantes con criterio inteligente, los mueve a memory/history/ (que NO se lee), reduce a ~120K tokens, contin√∫a compilaci√≥n normal. Datos en history/ est√°n preservados, recuperables si es necesario."
    motivo: "Incluso con rotaci√≥n, proyectos muy grandes pueden acumular demasiados datos. Si full/ (con todos los archivos rotados) supera 150K tokens, el CA no puede procesarlo eficientemente."
    impacto: "Ahorro real de tokens (history/ NO se lee). Datos preservados, no perdidos. Sistema escala ilimitadamente. Reversible (puedes recuperar de history/)."

  - id: "004"
    titulo: "YAML para todo (incluyendo sessions)"
    decision: "Todo el sistema usa YAML: sessions.yaml (antes sessions.md), adr.yaml, project-status.yaml, context.yaml, todos los templates .yaml"
    motivo: "Sessions originalmente eran .md (Markdown). Templates y ADRs ya eran YAML. Inconsistencia de formatos dificultaba parsing y ahorro de tokens."
    impacto: "Consistencia total del sistema. ~30% ahorro tokens vs Markdown. Mejor para LLMs (estructura clara). F√°cil parsear con js-yaml."

  - id: "006"
    titulo: "Sistema de rutas unificado memsys3/"
    decision: "TODAS las rutas en memsys3_templates/ deben usar el prefijo memsys3/: memsys3/memory/context.yaml, memsys3/agents/main-agent.yaml, memsys3/prompts/compile-context.md, etc. Durante deployment, memsys3_templates/ se copia a la ra√≠z del proyecto como memsys3/, por lo tanto todas las rutas internas funcionan correctamente."
    motivo: "Durante el desarrollo inicial se cre√≥ confusi√≥n sobre las rutas en el sistema. Los prompts referencian archivos usando rutas relativas, pero cuando memsys3 se despliega en diferentes proyectos, esas rutas deben ser consistentes."
    impacto: "Claridad total: siempre se sabe que es de memsys3. Portabilidad: funciona en cualquier proyecto. Actualizable: f√°cil saber qu√© archivos actualizar. Sin conflictos con carpetas del proyecto."

  - id: "009"
    titulo: "Templates como documentaci√≥n activa permanente + gotchas en sessions"
    decision: "memory/templates/ = Gu√≠as permanentes que Main-Agent consulta durante endSession.md. Gotchas documentados en sessions.yaml (contextualizados temporalmente). Context-Agent extrae gotchas de TODAS las sesiones y usa criterio inteligente para seleccionar top 5 m√°s cr√≠ticos (criterios: criticidad + recencia + impacto)."
    motivo: "Durante validaci√≥n del deployment surgi√≥ confusi√≥n: ¬øqu√© es template de qu√©? Templates dentro de templates genera la pregunta. An√°lisis revel√≥ que memory/templates/ contiene: estructura exacta de ADRs/sessions, instrucciones de uso, ejemplos de buenas pr√°cticas. Gotchas en project-status.yaml no tiene sentido conceptual: surgen DURANTE sesiones de trabajo, no son caracter√≠sticas est√°ticas del proyecto."
    impacto: "Deployment m√°s simple: copiar todo, no borrar templates/. Main-Agent siempre tiene referencia de c√≥mo documentar correctamente. Gotchas contextualizados (cu√°ndo aparecieron, en qu√© sesi√≥n). CA tiene flexibilidad para priorizar gotchas seg√∫n criterio. project-status.yaml m√°s limpio (solo info general)."

  - id: "010"
    titulo: "Consulta .gitignore durante deployment de memsys3"
    decision: "Agregar PASO 8 en deploy.md que pregunte al usuario si quiere excluir memsys3/ de GitHub ANTES de finalizar el deployment. Opci√≥n A (RECOMENDADO): Excluir - contexto local privado. Opci√≥n B: Incluir - para equipos que compartan contexto. WARNING: @ mentions NO funcionan con archivos ignorados (limitaci√≥n Claude Code). Workaround: usar instrucciones directas ('Ejecuta memsys3/prompts/newSession.md')."
    motivo: "Durante deployment en tallersColomer se identific√≥ que memsys3/ no estaba excluido de git, lo que significa que todo el contexto local (sessions, ADRs, gotchas) se subir√≠a al repositorio. memsys3/ contiene: sesiones de trabajo con Claude, decisiones arquitect√≥nicas internas, gotchas y aprendizajes espec√≠ficos del proceso, contexto que es √∫til localmente pero NO debe ser p√∫blico."
    impacto: "Usuario es consciente de la decisi√≥n de privacidad. Flexibilidad: equipos pueden elegir compartir contexto si quieren. Deployment completo y correcto desde el inicio. No hay sorpresas despu√©s. Recomendaci√≥n clara (Opci√≥n A recomendada). Warning expl√≠cito sobre limitaci√≥n @ mentions con workaround claro."

  - id: "011"
    titulo: "Separaci√≥n de prompts agn√≥sticos (distribuibles) vs espec√≠ficos (proyecto memsys3)"
    decision: "Regla de Oro: '¬øTiene sentido este archivo en CUALQUIER proyecto que use memsys3?' SI S√ç ‚Üí Agn√≥stico: va en memsys3_templates/ (se distribuye). SI NO ‚Üí Espec√≠fico: va en /prompts/ ra√≠z (NO se distribuye). AGN√ìSTICOS: newSession.md, endSession.md, compile-context.md, deploy.md, actualizar.md, mind.md, backlog.md, github.md, agents/*.yaml, memory/templates/*.yaml, viz/*. ESPEC√çFICOS: actualizar_cat.md (solo memsys3 tiene versi√≥n catalana), comprobar_alineamiento.md (solo memsys3 tiene dog-fooding). Pr√°ctica emerge del contexto: Context Agent incluye esta ADR en context.yaml, futuros agents la ven al cargar newSession.md."
    motivo: "Durante el desarrollo de memsys3 surgi√≥ la necesidad de crear prompts que solo tienen sentido en el contexto del desarrollo del propio memsys3, NO en proyectos que usen memsys3. Problema: Inicialmente estos archivos se crearon en memsys3/prompts/ y memsys3_templates/prompts/, lo que significa que se DISTRIBUIR√çAN a otros proyectos durante el deployment. Esto contaminar√≠a los deployments con herramientas internas espec√≠ficas del desarrollo de memsys3 que no tienen sentido fuera de este repositorio."
    impacto: "Deployments limpios: solo archivos agn√≥sticos se distribuyen. Claridad sobre qu√© es producto (templates) vs desarrollo interno. Regla simple y memorable para tomar decisiones. Pr√°ctica emerge del contexto (dog-fooding real de memsys3). No requiere enforcement r√≠gido (conf√≠a en el sistema). Flexible: nuevos archivos se clasifican f√°cilmente."

# ============================================
# SESIONES RECIENTES (17 totales, 4 incluidas)
# ============================================
sesiones_recientes:
  - id: "2025-11-17-planning-contexto-especifico-prompts"
    data: "2025-11-17"
    duracion: "~15min"
    que_es_va_fer:
      - "Sesi√≥n de planning e ideaci√≥n para identificar posible mejora en sistema de carga de contexto de prompts"
      - "Discusi√≥n sobre necesidades de contexto espec√≠fico por prompt (compile-context, endSession, deploy, actualizar, backlog)"
      - "Creaci√≥n de IMPROVEMENT-002 en backlog documentando la observaci√≥n"
    decisiones:
      - "Documentar la observaci√≥n en el backlog en lugar de implementar inmediatamente (requiere an√°lisis detallado de cada prompt)"
      - "Prioridad Media: no es urgente, sistema actual funciona correctamente"

  - id: "2025-11-14-mejora-context-agent-analisis-readme-backlog"
    data: "2025-11-14"
    duracion: "~3h"
    que_es_va_fer:
      - "MEJORA CR√çTICA compile-context.md: An√°lisis profundo README autom√°tico (PASO 7 obligatorio)"
      - "10 categor√≠as exhaustivas (A-J) con evidencia concreta: Versi√≥n, Features, Decisiones arquitect√≥nicas, Stack, Prompts, Pendientes, Gotchas, Backlog, Enlaces, Historial"
      - "Reporte estructurado autom√°tico con 3 niveles de severidad (üî¥ CR√çTICA, üü° IMPORTANTE, üü¢ MEJORA)"
      - "Optimizaci√≥n: CA usa datos ya en memoria (200K tokens), NO releer archivos"
      - "FEATURE NUEVA: Integraci√≥n backlog con lectura selectiva (Opci√≥n B)"
      - "Fase 1 ampliada: Lee backlog/README.md + cuenta items + lee SOLO items referenciados en pendientes_prioritarios"
    decisiones:
      - "An√°lisis README debe ser AUTOM√ÅTICO (PASO 7 en Fase 2), no pregunta opcional. Motivo: CA ya tiene TODO en memoria despu√©s de compilar context.yaml, aprovechar 200K tokens evita relecturas"
      - "Backlog: Elegida Opci√≥n B (lectura selectiva) vs A (no leer) o C (leer todo). Justificaci√≥n: Escalable, eficiente (lee solo referenciados), contextual (da visi√≥n futuro)"
    meta_aprendizaje:
      - "Context Agent tiene 200K tokens de contexto - debe aprovecharse haciendo an√°lisis en el mismo flujo de compilaci√≥n, no como paso posterior opcional"
      - "Lectura selectiva es clave para escalabilidad: leer TODO el backlog puede saturar tokens, leer NADA pierde contexto. Opci√≥n B (selectiva) es el balance correcto"

  - id: "2025-11-14-feature-backlog-distribuible"
    data: "2025-11-14"
    duracion: "~2h"
    que_es_va_fer:
      - "Sistema Backlog convertido de feature espec√≠fica (docs/backlog/) a feature distribuible (memsys3/backlog/)"
      - "README.md agn√≥stico creado (315 l√≠neas) con 3 ejemplos ilustrativos integrados (ISSUE, FEATURE, IMPROVEMENT)"
      - "Prompt backlog.md mejorado (38 l√≠neas) con 3 operaciones: Consultar, Crear, Actualizar (antes solo Crear)"
      - "Desplegado en 4 ubicaciones: memsys3_templates/, memsys3/, Fundamentos de Programaci√≥n, pokerezza-html"
      - "Migraci√≥n completa: 3 items movidos de docs/backlog/ a memsys3/backlog/ (ISSUE-001, IMPROVEMENT-001, FEATURE-002)"
      - "Eliminado docs/backlog/ completamente: sistema unificado en memsys3/backlog/"

  - id: "2025-11-13-fix-endsession-history-folder"
    data: "2025-11-13"
    duracion: "~1h"
    que_es_va_fer:
      - "Fix endSession.md: agregado warning expl√≠cito que NO se deben crear archivos en memory/history/ durante sesiones normales"
      - "Aclarado que memory/history/ es SOLO para archivado del Plan de Contingencia (ADR-003, cuando full/ supera 150K tokens)"
      - "Limpiado tallersColomer: movidos 3 archivos incorrectos de history/ a history_backup/"

# ============================================
# GOTCHAS CR√çTICOS (8 totales, 5 incluidos)
# Priorizados por criticidad + recencia + impacto
# ============================================
gotchas:
  - id: "limitacion_mentions_gitignore"
    problema: "@ mentions NO funcionan cuando archivos est√°n en .gitignore (limitaci√≥n de seguridad Claude Code)"
    solucion: "Usar instrucciones directas: 'Ejecuta memsys3/prompts/newSession.md' en lugar de @memsys3/prompts/newSession.md"
    criticidad: "alta"
    contexto: "Detectado en tallersColomer al excluir memsys3/ de git. Sistema funciona perfectamente, solo cambia la forma de invocar prompts. ADR-010 documenta el workaround."

  - id: "endsession_no_crear_history"
    problema: "endSession.md sin warning expl√≠cito puede causar que agentes creen archivos detallados en memory/history/ (confundiendo su prop√≥sito: Plan Contingencia vs documentaci√≥n activa)"
    solucion: "Agregar warning expl√≠cito: '‚ö†Ô∏è NO crear archivos detallados en memory/history/ - toda la info va DIRECTAMENTE en sessions.yaml'. Aclarar que history/ es SOLO para archivado >150K tokens"
    criticidad: "media"
    contexto: "Detectado en tallersColomer donde 3 sesiones crearon archivos incorrectos (session-2025-11-13-*.yaml). Campo arxiu_detall inventado por agente no est√° en dise√±o original."

  - id: "deploy_proteccion_sobrescritura"
    problema: "deploy.md sin verificaciones puede sobrescribir datos al ejecutarse dos veces"
    solucion: "Verificar si memsys3/ existe antes de mkdir. Limpiar memsys3_temp/ si existe de ejecuci√≥n previa"
    criticidad: "alta"
    contexto: "Previene p√©rdida de datos en deployment. deploy.md ahora incluye estas verificaciones."

  - id: "estructura_antigua_incompatible"
    problema: "Estructura pre-ADR-006 puede coexistir con estructura nueva sin migrar datos"
    solucion: "Detectar con: ls -la memory/ && ls -la memsys3/ ‚Üí si ambos existen, verificar cu√°l tiene datos reales"
    criticidad: "alta"
    contexto: "deCastro ten√≠a /memory con datos reales + /memsys3 con datos template. Context Agent leer√≠a datos incorrectos. actualizar.md tiene PASO 0 para detectar este escenario."

  - id: "yaml_keys_vs_valores"
    problema: "Traducir 'keys YAML' NO es lo mismo que traducir 'valores descriptivos YAML' - son dos tareas diferentes y ambas necesarias"
    solucion: "Despu√©s de traducir keys estructurales (descripcio:), hacer verificaci√≥n exhaustiva con grep de palabras catalanas distintivas (autom√†tica, rotaci√≥, intel¬∑ligent, etc.) en TODO el contenido, no solo en keys. Usar sed con word boundaries (\\b) para correcciones masivas seguras."
    criticidad: "alta"
    contexto: "FASE 3 tradujo correctamente keys YAML pero dej√≥ valores descriptivos en catal√°n (101 instancias)"

# ============================================
# PENDIENTES PRIORITARIOS
# ============================================
pendientes:
  - prioritat: 1
    tasca: "Testear deployment con consulta .gitignore en nuevo proyecto"
    detall: "Validar que PASO 8 funciona correctamente con warning @ mentions y usuario puede elegir Opci√≥n A o B"

  - prioritat: 2
    tasca: "Testear actualizar_cat.md en futuras sincronizaciones"
    detall: "Cuando haya nuevos cambios en master, validar que actualizar_cat.md sincroniza y traduce correctamente a branch catalan"

  - prioritat: 3
    tasca: "Testear actualizar.md en proyecto con estructura correcta (Escenario C)"
    detall: "Validar actualizaci√≥n en proyecto que solo tenga /memsys3 (no estructura antigua). Probar en Soluzzia."

  - prioritat: 4
    tasca: "Validar compile-context.md con creaci√≥n autom√°tica de README"
    detall: "Ejecutar compile-context en deCastro (sin README), probar Opci√≥n A (crear autom√°ticamente desde project-status.yaml)"

  - prioritat: 5
    tasca: "IMPROVEMENT-001 PARCIALMENTE RESUELTO - Evaluar siguiente fase"
    detall: "README ya incluido en contexto (opcional). Evaluar si agregar DEVELOPMENT.md, UPDATE.md seg√∫n necesidad"

# ============================================
# DECISIONES CLAVE DEL PROYECTO
# ============================================
decisions_clave:
  filosofia: "Criterio inteligente del CA, NO l√≠mites arbitrarios"
  escalabilidad: "Rotaci√≥n + archivado autom√°tico"
  preservacion: "Datos SIEMPRE preservados (history/, sessions_N.yaml, adr_N.yaml)"
  rutas: "Sistema unificado memsys3/ para portabilidad y claridad"
  documentacion: "Meta-niveles separados seg√∫n audiencia"
  workflow: "Main-Agent NO compila, solo sugiere endSession"
  templates: "memory/templates/ son gu√≠as permanentes, NO se borran post-deployment"
  gotchas: "Se documentan en sessions.yaml (contextualizados), NO en project-status"
  deployment: "Clone temporal memsys3_temp, copiar, briefing con templates, borrar temp"
  backlog: "Sistema unificado: memsys3/backlog/ (dog-fooding con items reales) + memsys3_templates/backlog/ (distribuible, solo README)"
  notacion_rutas: "Est√°ndar @memsys3/ siempre (notaci√≥n Claude Code)"

# ============================================
# NOTAS DE COMPILACI√ìN
# ============================================
notas_compilacion:
  adrs_totales: 11
  adrs_incluidas: 8
  justificacion_adrs: "Incluidas ADRs con impacto arquitect√≥nico global: 001 (criterio inteligente), 002 (rotaci√≥n autom√°tica), 003 (plan contingencia), 004 (YAML para todo), 006 (rutas unificado), 009 (templates permanentes + gotchas), 010 (consulta .gitignore), 011 (separaci√≥n agn√≥stico/espec√≠fico). Excluidas: ADR-005 (deploy.md como prompt), ADR-007 (separaci√≥n meta-niveles READMEs), ADR-008 (Main-Agent NO propone compile-context) - menos cr√≠ticas para nuevas instancias descontextualizadas que trabajar√°n directamente con el sistema ya establecido."

  sesiones_totales: 17
  sesiones_incluidas: 4
  justificacion_sesiones: "Sintetizadas √∫ltimas 4 sesiones m√°s relevantes (2025-11-17 planning, 2025-11-14 mejoras CA + backlog, 2025-11-13 fix endSession). Sesiones antiguas (2025-10-28 creaci√≥n inicial, traducciones catal√°n, validaciones deployment) archivadas conceptualmente - informaci√≥n ya destilada en ADRs y gotchas."

  gotchas_totales: 8
  gotchas_incluidos: 5
  justificacion_gotchas: "Top 5 por criticidad: limitaci√≥n @ mentions (alta), endSession history (media), deploy sobrescritura (alta), estructura antigua (alta), YAML keys vs valores (alta). Excluidos: gotchas de nomenclatura viewer.js (adrs_filtrades ‚Üí adrs_incloses) y contradicciones l√≠mites (2000 l√≠neas vs 2500-3000 tokens) - ya resueltos en sistema actual."

  tokens_iniciales: "~37,410 tokens (README: 2,473 + adr.yaml: 7,781 + sessions.yaml: 24,306 + project-status.yaml: 2,850)"
  tokens_finales: "~9,200 tokens estimados"
  archivamiento: "NO activado Plan Contingencia (contexto < 150K tokens)"
  criterios_filtraje: "Impacto arquitect√≥nico global, relevancia para agents descontextualizados, recencia (√∫ltimas 4 sesiones), criticidad de gotchas (top 5 alta/media), decisiones no obvias del c√≥digo, informaci√≥n que afecta m√∫ltiples componentes"
  lineas_totales: "~625 l√≠neas de 2000 m√°ximo"

  observaciones: |
    Compilaci√≥n normal exitosa. NO requerido Plan de Contingencia ni rotaci√≥n.

    README incluido y sintetizado a ~95 l√≠neas (de 257 l√≠neas originales).
    Backlog NO incluido: memsys3/backlog/ contiene items espec√≠ficos del desarrollo de memsys3
    (IMPROVEMENT-002 sobre contexto espec√≠fico prompts es interno, no relevante para instancias descontextualizadas).
    Si un proyecto desplegado tiene backlog/, Context Agent leer√° solo items referenciados en pendientes_prioritarios.

    Sistema en Development v1.9 con mejoras recientes significativas:
    - Context Agent mejorado: An√°lisis profundo README autom√°tico (PASO 7, 10 categor√≠as)
    - Integraci√≥n backlog selectiva (lee solo items referenciados)
    - Sistema sincronizaci√≥n catalana (actualizar_cat.md + branch catalan GitHub)
    - Fix @ mentions: warning expl√≠cito limitaci√≥n Claude Code + workaround
    - Deployment con consulta .gitignore (PASO 8, ADR-010)
    - Sistema actualizaci√≥n robusto (actualizar.md con detecci√≥n estructura antigua)
    - README opcional con creaci√≥n autom√°tica

    Contexto compilado incluye 8 de 11 ADRs (73%) - todas arquitect√≥nicamente cr√≠ticas.
    √öltimas 4 sesiones sintetizadas con highlights principales.
    5 gotchas cr√≠ticos documentados, incluyendo gotcha @ mentions con workaround.
    5 pendientes top prioritarios para siguiente trabajo.

    Sistema escalable, robusto y maduro para proyectos de cualquier tama√±o.

# ============================================
# NOTAS DE USO
# ============================================
# Este archivo es COMPILADO autom√°ticamente, no editar manualmente
# Para actualizar: ejecutar @memsys3/prompts/compile-context.md
# Para m√°s detalles: ver memory/full/adr.yaml y memory/full/sessions.yaml
# Si contexto demasiado grande: CA mover√° datos a memory/history/ (no le√≠do)
